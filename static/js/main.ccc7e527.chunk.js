(this["webpackJsonpshopify-developer-intern-challenge"]=this["webpackJsonpshopify-developer-intern-challenge"]||[]).push([[0],{376:function(e,t,n){},392:function(e,t){},393:function(e,t){},401:function(e,t){},406:function(e,t,n){"use strict";n.r(t);var a=n(5),c=n.n(a),i=n(121),r=n.n(i),s=(n(376),n(377),n(378),n(379),n(380),n(20)),o=n(11),l=n.n(o),u=n(48),d=n(19),j=n(16),b=n(6),h=n(18),p=n(443),x=n(468),f=n(472),O=n(473),g=n(474),m=n(352),v=n(458),w=n(475),k=n(455),y=n(476),C=n(477),S=n(478),I=n(479),L=n(68),P=n(449),R=n(450),U=n(451),B=n(89),D=n(353),F=n(463),T=n(460),E=n(465),M=n(467),z=n(466),A=n(469),G=n(457),H=n(470),J=n(462),q=n(452),N=n(471),W=n(456),Y=n(10);function K(e){var t=c.a.useState(!1),n=Object(b.a)(t,2),a=n[0],i=n[1],r=c.a.useState([]),s=Object(b.a)(r,2),o=s[0],u=s[1],h=Object(D.a)({accept:"image/jpeg, image/png",onDrop:function(e){var t=e.map((function(e){return{url:URL.createObjectURL(e),title:e.name,key:Object(W.a)(),classifications:[]}}));u(t.slice())}}),p=h.getRootProps,f=h.getInputProps,O=function(){var t=Object(d.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i(!1),e.addImages(o),u([]);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(Y.jsxs)("div",{children:[Object(Y.jsx)(F.a,{variant:"contained",onClick:function(){return i(!0)},"data-testid":"upload-button",children:"Upload"}),Object(Y.jsxs)(T.a,{open:a,"data-testid":"upload-dialog",children:[Object(Y.jsx)(E.a,{children:"Upload Images"}),Object(Y.jsx)(M.a,{children:0===o.length?Object(Y.jsxs)(x.a,Object(B.a)(Object(B.a)({},p()),{},{sx:{margin:"4px",width:"480px",height:"320px",border:"4px dashed rgba(100, 100, 100, .4)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[Object(Y.jsx)("input",Object(B.a)({},f())),Object(Y.jsxs)(z.a,{variant:"body1",sx:{textAlign:"center",opacity:.4,mb:1},children:["Drag 'n' drop some files here, or click to select files",Object(Y.jsx)("br",{}),"(Only *.jpeg and *.png images will be accepted)"]})]})):Object(Y.jsx)(A.a,{sx:{maxHeight:400},children:o.map((function(e,t){return Object(Y.jsxs)(G.a,{children:[Object(Y.jsx)(H.a,{children:Object(Y.jsx)(J.a,{sx:{width:160,height:120,borderRadius:2},variant:"square",src:e.url})}),Object(Y.jsx)(q.a,{sx:{ml:2,width:480},label:"Title",variant:"outlined",value:e.title,onChange:function(e){!function(e,t){u((function(n){var a=Object(j.a)(n),c=o[t];return c.title=e.target.value,a[t]=c,a}))}(e,t)}})]},e.key)}))})}),Object(Y.jsxs)(N.a,{children:[Object(Y.jsx)(F.a,{onClick:function(){i(!1),u([])},children:"Cancel"}),Object(Y.jsx)(F.a,{variant:"contained",onClick:O,"data-testid":"upload-upload",children:"Upload"})]})]})]})}var Q=n(299),V=(n(405),n(404),n(0)),X=n(350);function Z(){var e=c.a.useState(null),t=Object(b.a)(e,2),n=t[0],a=t[1],i=Boolean(n),r=c.a.useState(!0),s=Object(b.a)(r,2),o=s[0],h=s[1],p=c.a.useState(!0),L=Object(b.a)(p,2),B=L[0],D=L[1],F=c.a.useState([]),T=Object(b.a)(F,2),E=T[0],M=T[1],z=c.a.useState(""),A=Object(b.a)(z,2),G=A[0],H=A[1],J=new Q.a(E,{keys:[].concat(Object(j.a)(o?["title"]:[]),Object(j.a)(B?["classifications"]:[]))}),q=""===G?E:J.search(G).map((function(e){return e.item})),N=function(){var e=Object(d.a)(l.a.mark((function e(t){var n,a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Object(u.a)(t),e.prev=1,c=l.a.mark((function e(){var t,n,c,i,r,s,o,d,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.value,e.next=3,X.a({version:2,alpha:.5});case 3:return n=e.sent,(c=new Image).src=t.url,e.next=8,new Promise((function(e){return c.onload=e}));case 8:return e.next=10,V.browser.fromPixelsAsync(c);case 10:return i=e.sent,e.next=13,n.classify(i);case 13:r=e.sent,s=Object(u.a)(r);try{for(s.s();!(o=s.n()).done;)b=o.value,(d=t.classifications).push.apply(d,Object(j.a)(b.className.split(", ")))}catch(l){s.e(l)}finally{s.f()}M((function(e){return e.concat([t])}));case 17:case"end":return e.stop()}}),e)})),n.s();case 4:if((a=n.n()).done){e.next=8;break}return e.delegateYield(c(),"t0",6);case 6:e.next=4;break;case 8:e.next=13;break;case 10:e.prev=10,e.t1=e.catch(1),n.e(e.t1);case 13:return e.prev=13,n.f(),e.finish(13);case 16:case"end":return e.stop()}}),e,null,[[1,10,13,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(Y.jsxs)(x.a,{sx:{flexGrow:1},children:[Object(Y.jsx)(f.a,{position:"static",children:Object(Y.jsxs)(O.a,{children:[Object(Y.jsx)(K,{addImages:N}),Object(Y.jsx)(x.a,{sx:{flexGrow:1,minWidth:"12px"}}),Object(Y.jsxs)($,{children:[Object(Y.jsx)(_,{children:Object(Y.jsx)(P.a,{})}),Object(Y.jsx)(ee,{placeholder:"Search\u2026",inputProps:{"aria-label":"search"},onChange:function(e){H(e.target.value)}})]}),Object(Y.jsx)(g.a,{size:"large",edge:"start",color:"inherit","aria-label":"open drawer",sx:{ml:1},onClick:function(e){a(e.currentTarget)},"data-testid":"settings-button",children:Object(Y.jsx)(R.a,{})}),Object(Y.jsxs)(m.a,{id:"basic-menu",anchorEl:n,open:i,onClose:function(){a(null)},MenuListProps:{"aria-labelledby":"basic-button"},"data-testid":"settings-menu",children:[Object(Y.jsx)(v.a,{children:Object(Y.jsx)(w.a,{control:Object(Y.jsx)(k.a,{name:"titles",checked:o,onChange:function(e){h(e.target.checked)}}),label:"Search titles",sx:{width:"100%",height:"100%"}})}),Object(Y.jsx)(v.a,{children:Object(Y.jsx)(w.a,{control:Object(Y.jsx)(k.a,{name:"classification",checked:B,onChange:function(e){D(e.target.checked)}}),label:"Search image classification",sx:{width:"100%",height:"100%"}})})]})]})}),Object(Y.jsx)(y.a,{children:Object(Y.jsx)(C.a,{sx:{width:960,height:"100%",mx:"auto",overflow:"hidden"},cols:3,rowHeight:280,"data-testid":"image-list",children:q.map((function(e){return Object(Y.jsxs)(S.a,{children:[Object(Y.jsx)("img",{src:e.url,alt:e.title,loading:"lazy"}),Object(Y.jsx)(I.a,{title:e.title,subtitle:e.classifications.join(", "),actionIcon:Object(Y.jsx)(g.a,{sx:{color:"rgba(255, 255, 255, 0.54)"},"aria-label":"delete ".concat(e.title),onClick:function(){M((function(t){return t.filter((function(t){return t.key!==e.key}))}))},children:Object(Y.jsx)(U.a,{})})})]},e.key)}))})})]})}var $=Object(h.a)("div")((function(e){var t=e.theme;return Object(s.a)({position:"relative",borderRadius:t.shape.borderRadius,backgroundColor:Object(p.a)(t.palette.common.white,.15),"&:hover":{backgroundColor:Object(p.a)(t.palette.common.white,.25)},marginLeft:0,width:"100%"},t.breakpoints.up("sm"),{marginLeft:t.spacing(1),width:"auto"})})),_=Object(h.a)("div")((function(e){return{padding:e.theme.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"}})),ee=Object(h.a)(L.c)((function(e){var t=e.theme;return{color:"inherit","& .MuiInputBase-input":Object(s.a)({padding:t.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(t.spacing(4),")"),transition:t.transitions.create("width"),width:"100%"},t.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}})}})),te=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,480)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),i(e),r(e)}))};r.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(Z,{})}),document.getElementById("root")),te()}},[[406,1,2]]]);
//# sourceMappingURL=main.ccc7e527.chunk.js.map